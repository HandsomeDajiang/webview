<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy"
          content="default-src 'none';
            child-src 'self';
            connect-src 'self' https: wss: file: 'unsafe-inline';
            font-src 'self';
            form-action 'self';
            frame-src 'self' https://handsomedajiang.github.io/webview/;
            img-src 'self' blob: data:;
            media-src 'self' blob:;
            object-src 'none';
            script-src 'self';
            style-src 'self' 'unsafe-inline';"
    >
    <title>Title</title>
</head>
<body>
    <div>
        <button onclick="closeFrameWindow()">关闭窗口</button>
        <button onclick="getToken()">getToken</button>
        <button onclick="removeToken()">removeToken</button>
        <p id="content">123</p>
    </div>
</body>
</html>
<script>
    function closeFrameWindow() {
        alert(1)
    }
    function getToken() {
        window.parent.postMessage('webview获取token','https://handsomedajiang.github.io/webview/');
    }
    function removeToken() {
        alert(3)
    }
    window.addEventListener('message',e=>{
        console.error(e);
        // if(e.origin==='http://a.index.com'){
        console.log(e.origin) //父页面URL，这里是http://a.index.com
        console.log(e.source) // 父页面window对象，全等于window.parent/window.top
        console.log(e.data)  //父页面发送的消息
        // }
        document.getElementById('content').innerHTML = e.data.toString() + '_______' + e.origin.toString();
    },false)
</script>